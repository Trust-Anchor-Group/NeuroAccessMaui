<?xml version="1.0" encoding="utf-8" ?>
<base:BaseContentPage x:Name="ThisPage" x:Class="NeuroAccessMaui.UI.Pages.Main.QR.ScanQrCodePage" x:DataType="viewmodel:ScanQrCodeViewModel"
	xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
	xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
	xmlns:l="clr-namespace:NeuroAccessMaui.Services.Localization"
	xmlns:mct="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
	xmlns:base="clr-namespace:NeuroAccessMaui.UI.Pages"
	xmlns:controls="clr-namespace:NeuroAccessMaui.UI.Controls"
	xmlns:ui="clr-namespace:NeuroAccessMaui.UI"
	xmlns:viewmodel="clr-namespace:NeuroAccessMaui.UI.Pages.Main.QR"
	xmlns:zxing="clr-namespace:ZXing.Net.Maui.Controls;assembly=ZXing.Net.MAUI.Controls"
	Shell.FlyoutBehavior="Disabled">
	<!--
		Title="{x:Static resx:AppResources.ScanQRCode}"
		Style="{StaticResource BaseBackgroundPage}"
		>
	-->

	<Grid x:Name="GridWithAnimation"
		HorizontalOptions="FillAndExpand"
		VerticalOptions="FillAndExpand">

		<mct:StateContainer.StateViews>
			<Grid mct:StateView.StateKey="AutomaticScan">
				<zxing:CameraBarcodeReaderView x:Name="CameraBarcodeReaderView"
					HorizontalOptions="FillAndExpand"
					VerticalOptions="FillAndExpand"
					BarcodesDetected="CameraBarcodeReaderView_BarcodesDetected" />

				<VerticalStackLayout
					Grid.Row="1"
					VerticalOptions="End"
					Spacing="{StaticResource LargeSpacing}">

					<VerticalStackLayout
						Spacing="{StaticResource SmallSpacing}">
						<Path
							HeightRequest="66"
							WidthRequest="66"
							HorizontalOptions="Center"
							Aspect="Uniform"
							Data="{x:Static ui:Geometries.OnboardingIconPath}"
							BackgroundColor="White"
							Fill="#008000" />
						<Label
							Text="{l:Localize QrSectionTitle}" />
					</VerticalStackLayout>

					<HorizontalStackLayout
						HorizontalOptions="Center"
						Spacing="{StaticResource LargeSpacing}">
						<controls:ImageButton
							Data="{x:Static ui:Geometries.CameraImageButtonPath}" />
						<controls:ImageButton
							Data="{x:Static ui:Geometries.CameraTorchButtonPath}" />
						<controls:ImageButton
							Data="{x:Static ui:Geometries.CameraSwitchButtonPath}" />
					</HorizontalStackLayout>

					<controls:FilledButton x:Name="ModeButton"
						Command="{Binding Path=SwitchModeCommand, Source={x:Reference ThisPage}}"
						Text="{Binding Path=ModeText}" />
				</VerticalStackLayout>
			</Grid>

			<StackLayout x:Name="ManualScanGrid" mct:StateView.StateKey="ManualScan"
				BackgroundColor="Yellow"
				HorizontalOptions="FillAndExpand"
				VerticalOptions="CenterAndExpand">
				<Label
					HorizontalOptions="FillAndExpand"
					Text="scan" />
				<!--  Text="{x:Static resx:AppResources.QrScanUri}" />  -->
				<Entry x:Name="LinkEntry"
					HorizontalOptions="Fill"
					Keyboard="Url"
					ReturnType="Done"
					Text="{Binding Path=LinkText, Mode=TwoWay}" />
				<Button x:Name="OpenButton"
					Clicked="OpenButton_Click"
					IsEnabled="{Binding Path=OpenIsEnabled}"
					Text="{Binding Path=OpenCommandText}" />
			</StackLayout>
		</mct:StateContainer.StateViews>

		<!--  default state, should not occur  -->
		<Label
			HorizontalTextAlignment="Center"
			Text="Something went wrong!"
			VerticalTextAlignment="Center" />
	</Grid>
	<!--
	<StackLayout Spacing="12" Orientation="Vertical" Margin="{StaticResource DefaultMargin}">
            <Grid x:Name="AutomaticScanGrid"
                  VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand"
                  IsVisible="{Binding Path=ScanIsAutomatic, Mode=OneWay}">
                <forms:ZXingScannerView x:Name="Scanner"
                                        OnScanResult="Scanner_OnScanResult"
										IsScanning="False" IsAnalyzing="False"
										SizeChanged="ZXingScannerView_SizeChanged"/>
                <forms:ZXingDefaultOverlay TopText="{x:Static resx:AppResources.QrScanOverlay}"/>
            </Grid>


        </StackLayout>	-->
</base:BaseContentPage>
